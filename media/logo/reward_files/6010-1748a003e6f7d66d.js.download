"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6010],{26010:function(e,a,t){t.d(a,{Z:function(){return C}});var l=t(82729),s=t(85893),r=t(17283),n=t(73359),i=t(47533),o=t(78945),d=t(93791),c=t(30381),m=t.n(c),u=t(11163),p=t(67294),h=t(9198),f=t.n(h),x=t(87536),y=t(74231);t(3509);var N=t(66642),j=t(79274),v=t(51448),b=t(68288);function g(){let e=(0,l._)(['\n    query Properties {\n        properties(\n            orderBy: { name: asc }\n            where: {\n                residentialType: { equals: "Residential" }\n                showProperty: { equals: true }\n            }\n        ) {\n            id\n            name\n            slug\n            residentialType\n            city {\n                name\n            }\n            proj_code\n            add_code\n        }\n    }\n']);return g=function(){return e},e}let w=(0,r.Ps)(g());var C=(0,p.forwardRef)((e,a)=>{var t,l;let{onClose:r,item:c}=e,h=(0,u.useRouter)(),[g,C]=(0,p.useState)(!0),[D,E]=(0,p.useState)({firstName:"",lastName:"",email:"",phone:"",country:"",time:"10:00 AM",date:m()().add(1,"day").format("MM/DD/yyyy"),propertyType:"",property:{id:"",name:"",city:"",url:"",addCode:"",projCode:""},dateTime:m()().add(1,"day").format("MM/DD/yyyy 10:00 AM")}),[k]=(0,n.t)(w,{onCompleted:e=>{_(e.properties.slice().sort((e,a)=>e.city.name<a.city.name?-1:e.city.name>a.city.name?1:0))}}),[S,_]=(0,p.useState)([]),[q,F]=(0,p.useState)(!1),[Z,T]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r(e)};return window.addEventListener("keyup",e),()=>window.removeEventListener("keyup",e)},[r]);let M=(0,p.useCallback)(e=>{let a=new Date,t=new Date(a.setDate(a.getDate())),l=new Date(a.setDate(a.getDate()+90));return e>=t&&e<=l},[]),[L,P]=(0,p.useState)([]);(0,p.useEffect)(()=>{P((function(e,a){let t=m()(e,"HH:mm"),l=m()(a,"HH:mm");l.isBefore(t)&&l.add(1,"day");let s=[];for(;t<=l;)s.push(m()(t).format("hh:mm A")),t.add(15,"minutes");return s})("10:00","18:00").map(e=>({value:e,label:e})))},[]);let[I,Y]=(0,p.useState)("IN"),H=d.PhoneNumberUtil.getInstance();y.kM(y.Z_,"phone",function(e){return this.test("phone",e,function(a){let{path:t,createError:l}=this;return H.isValidNumber(H.parse(a,I))||l({path:t,message:e||"Enter a valid phone number for ".concat(I)})})});let A=y.Ry({phone:null===(t=y.Z_())||void 0===t?void 0:t.phone().min(11,"Enter A Valid Number"),email:y.Z_().email("Enter Valid Email").required({message:"Email is required"}),firstName:y.Z_().required({message:"First name is required"}),lastName:y.Z_().required({message:"Last name is required"})}),{control:R,formState:{errors:V},getValues:B,register:G,handleSubmit:J}=(0,x.cI)({resolver:(0,i.X)(A)});(0,p.useEffect)(()=>{k()},[]),(0,p.useEffect)(()=>{E(e=>({...e,dateTime:new Date("".concat(D.date," ").concat(D.time)).toLocaleString()}))},[D.date,D.time]),(0,p.useEffect)(()=>{let e=document.querySelector(".schedule-content .countryCode");e&&e.remove();let a=document.querySelector(".schedule-content .PhoneInputCountry"),t=document.createElement("div");t.className="countryCode",t.innerHTML="".concat(b.Z[I]?b.Z[I]:"0"),(null==a?void 0:a.parentNode)&&(null==a||a.parentNode.insertBefore(t,a.nextSibling))},[I]),(0,p.useEffect)(()=>{c&&E(e=>({...e,propertyType:c.residentialType,property:{id:c.id,name:c.name,city:c.city.name,projCode:c.proj_code,addCode:c.add_code,url:location.href}}))},[]);let O=async()=>{T(!0);let e=null===N.o||void 0===N.o?void 0:N.o.filter(e=>I===(null==e?void 0:e.value));try{var a;let t=await o.Z.get("/api/token"),l=await o.Z.post("/api/enquiry",{formData:{...D,optIn:g?"Yes":"No",...B(),country:null==e?void 0:null===(a=e[0])||void 0===a?void 0:a.title},token:t.data});l&&l.data&&l.data[0].Id&&(T(!1),F(!0))}catch(e){}};return(0,p.useEffect)(()=>{if(q){let e=JSON.stringify(D),a=B().firstName,t=B().lastName;h.push({pathname:"/success-page",query:{data:e,firstName:a,lastName:t,modal:"Schedule"}})}},[q]),(0,s.jsx)("div",{id:h.asPath.includes("property")?"property-listing-schedule-form":h.asPath.includes("residential")?"property-details-schedule-form":"home-schedule-tour-form",className:"modal modal-schedule flex items-center justify-center",children:(0,s.jsx)("div",{className:"modal-content schedule-content relative p-8",ref:a,children:Z?(0,s.jsx)("div",{className:"loading-div",children:(0,s.jsx)("div",{className:"text-success inline-block h-20 w-20 animate-spin rounded-full border-4 border-solid border-green-500 border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,s.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"close",onClick:e=>{r(e)},children:(0,s.jsx)("img",{src:"/images/modal-close.png",alt:"close"})}),!q&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h4",{className:"text-center uppercase",children:"Schedule a Tour Today"}),(0,s.jsxs)("div",{className:"content-area mx-auto flex flex-col",children:[(0,s.jsx)("span",{className:"mt-12 block",children:"Fill in the following details and we will get back to you shortly."}),(0,s.jsxs)("form",{className:"flex flex-col",onSubmit:J(O),children:[(0,s.jsxs)("div",{className:"form-row flex flex-wrap justify-between",children:[(0,s.jsxs)("label",{className:"placeholder-label mt-9",htmlFor:"",children:[(0,s.jsx)("input",{className:"".concat(V.firstName&&"border-b-red-500"),placeholder:"First Name",...G("firstName")}),V.firstName&&(0,s.jsx)("p",{role:"alert",className:"text-red-500",children:V.firstName.message.message})]}),(0,s.jsxs)("label",{className:"placeholder-label mt-9",htmlFor:"",children:[(0,s.jsx)("input",{className:"".concat(V.lastName&&"border-b-red-500"),placeholder:"Last Name",...G("lastName")}),V.lastName&&(0,s.jsx)("p",{role:"alert",className:"text-red-500",children:V.lastName.message.message})]})]}),(0,s.jsxs)("div",{className:"form-row flex flex-wrap justify-between",children:[(0,s.jsxs)("label",{className:"placeholder-label mt-9",htmlFor:"",children:[(0,s.jsx)("input",{className:"".concat(V.email&&"border-b-red-500"),placeholder:"Email ID",...G("email")}),V.email&&(0,s.jsx)("p",{role:"alert",className:"text-red-500",children:V.email.message.message||V.email.message})]}),(0,s.jsxs)("label",{className:"mt-9",htmlFor:"",children:[(0,s.jsx)(x.Qr,{name:"phone",control:R,defaultValue:"",render:e=>{var a;let{field:t}=e;return(0,s.jsx)(v.Z,{...t,country:I,onCountryChange:e=>{Y(e)},errors:!!V.phone,value:t.value,isError:!!(null===(a=V.phone)||void 0===a?void 0:a.message)})}}),(null==V?void 0:V.phone)&&(0,s.jsx)("p",{role:"alert",className:"text-red-500",children:null==V?void 0:null===(l=V.phone)||void 0===l?void 0:l.message})]})]}),(0,s.jsxs)("div",{className:"form-row flex flex-wrap items-end justify-between",children:[(0,s.jsx)("label",{className:"mt-9",htmlFor:"",children:(0,s.jsx)(f(),{selected:new Date(D.date),onChange:e=>{E({...D,date:m()(e).format("MM/DD/YYYY")})},startDate:new Date,filterDate:M})}),(0,s.jsx)("label",{className:"mt-9",htmlFor:"",children:(0,s.jsx)("select",{name:"time",id:"",className:"form-select",onChange:e=>{let{name:a,value:t}=e.target;E(e=>({...e,[a]:t}))},children:L.map((e,a)=>(0,s.jsx)("option",{value:e.value,children:e.label},a))})})]}),(0,s.jsx)("div",{className:"form-row flex flex-wrap items-end justify-between",children:(0,s.jsx)("label",{className:"mt-9",htmlFor:"",children:(0,s.jsxs)("select",{name:"",id:"",className:"form-select",onChange:e=>{let a=S.find(a=>a.id===e.target.value);E({...D,property:{id:a.id,name:a.name,url:"".concat(location.href,"property/").concat(a.residentialType.toLowerCase(),"/").concat(a.slug),city:a.city.name,addCode:a.add_code,projCode:a.proj_code}})},children:[!c&&(0,s.jsx)("option",{value:"",children:"Select Project"}),c?(0,s.jsxs)("option",{value:c.id,children:[c.name,","," ",c.city.name]}):S.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name,","," ",e.city.name]},e.id))]})})}),(0,s.jsxs)("label",{htmlFor:"subscribe",className:"checkbox-default mt-4 flex md:mt-8",children:[(0,s.jsx)("input",{type:"checkbox",onChange:()=>C(!g),checked:!!g,className:"",name:"status",id:"subscribe"}),(0,s.jsx)("span",{children:"Yes, I would like to receive updates & promotions from Godrej Properties Limited."})]}),(0,s.jsx)(j.Z,{type:"submit",children:"Submit"})]})]})]})," "]})})})})}}]);