(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{41149:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/property/residential",function(){return a(2624)}])},2624:function(e,n,a){"use strict";a.r(n),a.d(n,{__N_SSP:function(){return M}});var i=a(82729),t=a(85893),r=a(17283),s=a(16748),l=a(73359),o=a(25935),c=a(5152),u=a.n(c),p=a(25675),d=a.n(p),m=a(11163),y=a(67294);function h(){let e=(0,i._)(["\n    query Cities {\n        cities(orderBy: [{ order: asc }, { name: asc }]) {\n            main\n            name\n            subCity {\n                name\n            }\n        }\n    }\n"]);return h=function(){return e},e}function _(){let e=(0,i._)(['\n    query Seos {\n        seos(where: { url: { equals: "/property/residential" } }) {\n            url\n            start_of_head\n            end_of_head\n        }\n    }\n']);return _=function(){return e},e}function g(){let e=(0,i._)(["\n        query popularSearch {\n            homes {\n                popular_searches(orderBy: { order: asc }) {\n                    title\n                    url\n                }\n            }\n        }\n    "]);return g=function(){return e},e}function v(){let e=(0,i._)(["\n        query Properties(\n            $residentialType: String\n            $virtualTour: String\n            $city: [String!]\n            ","\n            $status: [String!]\n            ","\n            ","\n            ","\n            ","\n            $amenities: [String!]\n            $skip: Int = 0\n            $size: Int = 10\n            $search: String\n        ) {\n            properties(\n                take: $size\n                skip: $skip\n                orderBy: [\n                    { orderBy: asc }\n                    \n                ]\n                where: {\n                    showProperty: { equals: true }\n                    residentialType: { equals: $residentialType }\n                    virtual_tour_link: { not: { equals: $virtualTour } }\n                    city: { name: { in: $city } }\n                    key_usp: { in: $status }\n                    amenity_filter: { some: { name: { in: $amenities } } }\n                    name: { contains: $search }\n                    ","\n                }\n            ) {\n                id\n                slug\n                name\n                key_usp\n                location\n                phone_number\n                add_code\n                proj_code\n                hash\n                route_hash\n                whatsapp_url\n                residentialType\n                city {\n                    name\n                }\n                neighbourhood {\n                    geolocation_coordinates {\n                        latitude\n                        longitude\n                    }\n                }\n                minimum_price: starting_prices(\n                    orderBy: { minimum_price: asc }\n                    take: 1\n                ) {\n                    name\n                    minimum_price\n                    minimum_area\n                    maximum_area\n                }\n                starting_prices(\n                    orderBy: { name: asc }\n                ) {\n                    id\n                    name\n                    minimum_price\n                    maximum_price\n                    minimum_area\n                    maximum_area\n                }\n                possessionDate\n                noOfFloors\n                noOfBathRooms\n                thumbnail {\n                    url\n                }\n            }\n            propertiesCount(\n                where: {\n                    showProperty: { equals: true }\n                    residentialType: { equals: $residentialType }\n                    virtual_tour_link: { not: { equals: $virtualTour } }\n                    city: { name: { in: $city } }\n                    key_usp: { in: $status }\n                    amenity_filter: { some: { name: { in: $amenities } } }\n                    name: { contains: $search }\n                    ","\n                }\n            )\n        }\n    "]);return v=function(){return e},e}let b=u()(()=>Promise.resolve().then(a.t.bind(a,9008,23)),{loadableGenerated:{webpack:()=>[9008]}}),x=u()(()=>Promise.all([a.e(6342),a.e(1664),a.e(4184),a.e(6774),a.e(9998),a.e(6550),a.e(7171),a.e(7156)]).then(a.bind(a,57156)),{loadableGenerated:{webpack:()=>[57156]}}),f=u()(()=>Promise.all([a.e(6342),a.e(1664),a.e(4184),a.e(5697),a.e(7064),a.e(381),a.e(468),a.e(9274),a.e(8764),a.e(6714),a.e(8945),a.e(2663),a.e(9590),a.e(3509),a.e(6642),a.e(9198),a.e(6010),a.e(368),a.e(2167),a.e(4292),a.e(4100),a.e(2570),a.e(1135)]).then(a.bind(a,61135)),{loadableGenerated:{webpack:()=>[61135]},ssr:!1}),$=u()(()=>Promise.all([a.e(6342),a.e(1664),a.e(4184),a.e(3089),a.e(5697),a.e(7064),a.e(381),a.e(468),a.e(9274),a.e(8764),a.e(6714),a.e(8945),a.e(2663),a.e(9590),a.e(3509),a.e(6642),a.e(9198),a.e(6010),a.e(368),a.e(2167),a.e(4292),a.e(4100),a.e(3306),a.e(5136)]).then(a.bind(a,5136)),{loadableGenerated:{webpack:()=>[5136]}}),T=u()(()=>Promise.all([a.e(4184),a.e(3089),a.e(5697),a.e(7064),a.e(468),a.e(8764),a.e(6714),a.e(8945),a.e(2663),a.e(2432)]).then(a.bind(a,32432)),{loadableGenerated:{webpack:()=>[32432]}}),k=u()(()=>a.e(3089).then(a.bind(a,63089)),{loadableGenerated:{webpack:()=>[63089]}}),w=u()(()=>Promise.all([a.e(9998),a.e(8661)]).then(a.bind(a,8661)),{loadableGenerated:{webpack:()=>[8661]}}),j=(0,r.Ps)(h()),R="starting_prices: {\n    some: {\n        AND: [\n            { name: { in: $propertyTypes } }\n            { minimum_price: { gte: $priceRangeMin, lte: $priceRangeMax } }\n            { maximum_price: { lte: $priceRangeMax, gte: $priceRangeMin } }\n            { minimum_area: { gte: $areaMin } }\n            { maximum_area: { lte: $areaMax } }\n        ]\n    }\n}",P=(0,r.Ps)(_()),S={city:["All"],propertyTypes:["All"],status:["All"],priceRange:{min:0,max:2e8},area:{min:0,max:1e3},newLaunchOnly:!1,soldOutOnly:!1,amenities:[],residentialType:"Residential",virtualTour:"No",search:""};var M=!0;n.default=e=>{var n,a,i,c,u;let{cityWithCoords:p,allProperties:h,clusterObject:_}=e,{query:M}=(0,m.useRouter)(),[q,A]=(0,y.useState)(!0),[N,C]=(0,y.useState)(!0),O=N?9:null,B=(0,m.useRouter)(),F=(0,r.Ps)(g()),E=(0,r.Ps)(v(),q?"":"$propertyTypes: [String!]",q?"":"$priceRangeMin: Float",q?"":"$priceRangeMax: Float",q?"":"$areaMin: Float",q?"":"$areaMax: Float",q?"":R,q?"":R),{data:G}=(0,s.a)(P),z=null==G?void 0:null===(a=G.seos)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.start_of_head,I=null==G?void 0:null===(c=G.seos)||void 0===c?void 0:null===(i=c[0])||void 0===i?void 0:i.end_of_head,D=e=>(e=decodeURIComponent(e)).split(","),[L,V]=(0,y.useState)({...S,city:M.city?D(M.city):["All"],propertyTypes:M.propertyTypes?D(M.propertyTypes):["All"],status:M.status?D(M.status):["All"]});(0,y.useEffect)(()=>{0===L.area.min&&1e3===L.area.max&&L.propertyTypes.includes("All")&&0===L.priceRange.min&&2e8===L.priceRange.max?A(!0):A(!1)},[L]);let[X,Z]=(0,y.useState)(+B.query.page||1),U=L.status.includes("All")?void 0:L.status,[W,{data:Y,loading:H,error:J}]=(0,l.t)(E,{variables:{residentialType:L.residentialType,city:L.city.includes("All")?void 0:L.city,propertyTypes:L.propertyTypes.includes("All")?void 0:L.propertyTypes,status:U,priceRangeMin:0===L.priceRange.min?void 0:L.priceRange.min,priceRangeMax:2e8===L.priceRange.max?void 0:L.priceRange.max,page:X,size:O,skip:O?(X-1)*O:0,..."Yes"===L.virtualTour&&{virtualTour:""},areaMin:0===L.area.min?void 0:L.area.min,areaMax:1e3===L.area.max?void 0:L.area.max,amenities:L.amenities.length>0?L.amenities:void 0,search:L.search}}),{data:K}=(0,s.a)(j),{data:Q}=(0,s.a)(F);return(0,y.useEffect)(()=>{B.replace({query:{...M,page:X}})},[X]),(0,y.useEffect)(()=>{W();let e=B.query;L.city.includes("All")?delete e.city:(e.page&&Z(1),e.city=L.city.join(",")),L.propertyTypes.includes("All")?delete e.propertyTypes:(e.page&&Z(1),e.propertyTypes=L.propertyTypes.join(",")),L.status.includes("All")?delete e.status:(e.page&&Z(1),e.status=L.status.join(",")),B.replace({query:e})},[W,L]),(0,t.jsxs)(w,{startOfBody:z,endOfBody:I,popularSearch:null==Q?void 0:null===(u=Q.homes[0])||void 0===u?void 0:u.popular_searches,children:[(0,t.jsxs)(b,{children:[z?(0,o.ZP)(z):(0,t.jsx)("title",{children:"Search for Residential Properties"}),I?(0,o.ZP)(I):(0,t.jsx)(t.Fragment,{})]}),(0,t.jsxs)("div",{className:"mx-auto mb-6 mt-28 ",children:[(0,t.jsx)(k,{children:"Find where you belong"}),(0,t.jsxs)("div",{className:"mt-8 flex justify-center gap-12",children:[(0,t.jsxs)("div",{className:"".concat(N&&"opacity-100"," flex cursor-pointer items-center gap-2 ").concat(!N&&"opacity-50"),onClick:()=>C(!0),children:[(0,t.jsx)(d(),{priority:!0,width:"25",height:"25",alt:"tab",src:"/images/map-location/list-view.svg"}),(0,t.jsx)("h5",{className:"".concat(N&&"black border-b border-black"," font-normal"),children:"List View"})]}),(0,t.jsxs)("div",{className:"".concat(!N&&"map-view  opacity-100"," flex cursor-pointer items-center gap-2 ").concat(N&&"opacity-50"),onClick:()=>C(!1),children:[(0,t.jsx)(d(),{priority:!0,width:"25",height:"25",alt:"tab",src:"/images/map-location/map.svg"}),(0,t.jsx)("h5",{className:"".concat(!N&&"black border-b border-black"," font-normal"),children:"Map View"})]})]})]}),N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{state:L,setState:V,cities:null==K?void 0:K.cities,resetFilter:()=>{V(S)}}),Y?(0,t.jsx)($,{state:{data:Y,loading:H,error:J,currentPage:X,setCurrentPage:Z,pageSize:O,residentialType:"Residential"},range:null==L?void 0:L.priceRange,setCurrentPage:Z}):null," "]}):(0,t.jsx)(f,{allProperties:h,cityWithCoords:p,clusterObject:_}),(0,t.jsx)(T,{})]})}}},function(e){e.O(0,[4174,5152,5675,5935,3359,2888,179],function(){return e(e.s=41149)}),_N_E=e.O()}]);